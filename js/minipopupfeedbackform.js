var feedback=document.querySelector(".feedback-btn"),popupFeedbackForm=document.querySelector(".modal-back"),closeFeedbackForm=popupFeedbackForm.querySelector(".modal-close"),login=popupFeedbackForm.querySelector("[name=name]"),form=popupFeedbackForm.querySelector(".feedback-form"),emailUser=popupFeedbackForm.querySelector("[name=email]"),messageUser=popupFeedbackForm.querySelector("[name=message]"),isStorageSupport=!0,storageLogin="",storageEmail="";try{storageLogin=localStorage.getItem("login"),storageEmail=localStorage.getItem("emailUser")}catch(e){isStorageSupport=!1}feedback.addEventListener("click",function(e){e.preventDefault(),popupFeedbackForm.classList.add("modal-show"),storageLogin&&storageEmail?(login.value=storageLogin,emailUser.value=storageEmail,messageUser.focus()):login.focus()}),closeFeedbackForm.addEventListener("click",function(e){e.preventDefault(),popupFeedbackForm.classList.remove("modal-show"),popupFeedbackForm.classList.remove("modal-error")}),form.addEventListener("submit",function(e){login.value&&emailUser.value?isStorageSupport&&(localStorage.setItem("login",login.value),localStorage.setItem("emailUser",emailUser.value)):(e.preventDefault(),popupFeedbackForm.classList.remove("modal-error"),popupFeedbackForm.offsetWidth=popupFeedbackForm.offsetWidth,popupFeedbackForm.classList.add("modal-error")),messageUser.value||(e.preventDefault(),popupFeedbackForm.classList.remove("modal-error"),popupFeedbackForm.offsetWidth=popupFeedbackForm.offsetWidth,popupFeedbackForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupFeedbackForm.classList.contains("modal-show")&&(popupFeedbackForm.classList.remove("modal-show"),popupFeedbackForm.classList.remove("modal-error")))});
